<div data-role="view" data-title="Calendar" data-layout="main" data-model="app.models.calView">

	<div id="calendar"></div>

	<script>

	$(document).ready(function() { 

		var calendar = $('#calendar').fullCalendar({
			aspectRatio: 1, 
			header: {
				left: 'today prev,next', 
				center: 'title', 
				right: 'month,basicWeek,basicDay'
			},

			dayClick: function(date, jsEvent, view) { 
				calendar.fullCalendar('changeView', 'basicDay');
				calendar.fullCalendar('gotoDate', date);
			}

		});


		var allDayBoolean = false;
		var foodColor = 'red';
		//var 


		// ----read in data from Food database-----
		var el = new Everlive('TiQ179pLOVoq4iN1');
		var data = el.data('Food');
		data.get()
		.then(function(data){
			//alert(JSON.stringify(data));
			var foodTitle = "";
			var foodStartTime = "";
			var foodEndTime = "";
			for (var i = 0; i < data.count; i++) { 
				foodTitle = "Food: " + data.result[i].food_name;
				foodStartTime = data.result[i].time;
				foodEndTime = new Date(foodStartTime.getTime() + 15*60000);
				console.log(foodStartTime);
				console.log(foodEndTime);
				console.log(foodTitle);

			var foodEvent = {
				title: foodTitle,
				allDay: allDayBoolean,
				start: foodStartTime,
				end: foodEndTime,
				color: foodColor
			};

			calendar.fullCalendar('renderEvent', foodEvent, 'stick');
		}


			console.log(data.result);
		},
		function(error){
			alert(JSON.stringify(error));
		});

	});
	
	</script>

</div>
