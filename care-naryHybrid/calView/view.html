<div data-role="view" data-title="Calendar" data-layout="main" data-model="app.models.calView">

	<div id="calendar"></div>

	<script>

	$(document).ready(function() { 

		var calendar = $('#calendar').fullCalendar({
			aspectRatio: 1, 
			header: {
				left: 'today prev,next', 
				center: 'title', 
				right: 'month,basicWeek,basicDay'
			},

			dayClick: function(date, jsEvent, view) { 
				calendar.fullCalendar('changeView', 'basicDay');
				calendar.fullCalendar('gotoDate', date);
			}

		});


		var allDayBoolean = false;
		var foodColor = 'red';
		//var 


		// ----read in data from Food database-----
		var el = new Everlive('TiQ179pLOVoq4iN1');
		var foodData = el.data('Food');
		foodData.get()
		.then(function(foodData){
			//alert(JSON.stringify(data));
			var foodTitle = "";
			var foodStartTime = "";
			var foodEndTime = "";
			for (var i = 0; i < foodData.count; i++) { 
				foodTitle = "Food: " + foodData.result[i].food_name;
				foodStartTime = foodData.result[i].time;
				foodEndTime = new Date(foodStartTime.getTime() + 15*60000);
				console.log(foodStartTime);
				console.log(foodEndTime);
				console.log(foodTitle);

				var foodEvent = {
					title: foodTitle,
					allDay: allDayBoolean,
					start: foodStartTime,
					end: foodEndTime,
					color: foodColor
				};

			calendar.fullCalendar('renderEvent', foodEvent, 'stick');
		    } // close loop

			//console.log(foodData.result);
		},
		function(error){
			alert(JSON.stringify(error));
		});


		//------- read in data from Medications database -------
		var medData = el.data('Medications');
		medData.get()
		.then(function(medData){
			alert(JSON.stringify(medData));
			// var foodTitle = "";
			// var foodStartTime = "";
			// var foodEndTime = "";
			// for (var i = 0; i < foodData.count; i++) { 
			// 	foodTitle = "Food: " + foodData.result[i].food_name;
			// 	foodStartTime = foodData.result[i].time;
			// 	foodEndTime = new Date(foodStartTime.getTime() + 15*60000);
			// 	console.log(foodStartTime);
			// 	console.log(foodEndTime);
			// 	console.log(foodTitle);

				// var foodEvent = {
				// 	title: foodTitle,
				// 	allDay: allDayBoolean,
				// 	start: foodStartTime,
				// 	end: foodEndTime,
				// 	color: foodColor
				// };

			// calendar.fullCalendar('renderEvent', foodEvent, 'stick');
		 // } // close loop

			//console.log(medData.result);
		},
		function(error){
			alert(JSON.stringify(error));
		});

	});
	
	</script>

</div>
